{
  "id": "2025-11-04-mdns-selfcheck-test-03-enum-warn",
  "date": "2025-11-04",
  "component": "tests/bats/mdns_selfcheck.bats:158",
  "rootCause": "Test 'mdns self-check warns when enumeration misses but browse succeeds' fails because service type checking logic exits early with code 4 when service type is not found in enumeration, even though the active query window finds valid instances. The test expects the script to warn (severity=warn) but continue and succeed (outcome=ok), however the script exits with failure.",
  "resolution": "The mdns_type_check.sh active query window logic needs to properly set active_found=1 when instances are discovered, preventing the fail-fast exit. Current investigation shows the active browse command succeeds but the awk counting logic may not be completing, leaving active_found=0 and triggering the exit code 4 path.",
  "references": [
    "tests/bats/mdns_selfcheck.bats:158-200",
    "scripts/mdns_type_check.sh:167-196",
    "notes/final-summary.md:33-36"
  ]
}
