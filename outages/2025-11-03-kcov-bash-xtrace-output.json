{
  "id": "kcov-bash-xtrace-output",
  "date": "2025-11-03",
  "component": "CI / test workflow",
  "rootCause": "Running BATS tests under kcov for code coverage causes bash's xtrace mode to be enabled, which results in test conditions like '[[ \"$output\" == *pattern* ]]' being echoed to stderr. Each character in the glob pattern gets backslash-escaped (e.g., '*\\e\\v\\e\\n\\t\\=\\a\\v\\a\\h\\i' for 'event='). The escaped test assertions get mixed with normal log output in the captured test output, breaking test expectations that check for specific log patterns.",
  "resolution": "Add --bash-dont-parse-binary-dir flag to kcov invocation and explicitly exclude tests directory from coverage patterns. This prevents kcov from instrumenting the test framework code itself and reduces xtrace pollution in test output.",
  "references": [
    "https://github.com/futuroptimist/sugarkube/actions/runs/19027073016/job/54332570834?pr=1664"
  ]
}
