{
  "id": "2025-10-27-k3s-discover-server-hosts",
  "date": "2025-10-27",
  "component": "scripts/k3s-discover.sh",
  "rootCause": "k3s-discover lacked a CLI path to list all discovered server hosts, so rehearsing and automating multi-node joins required ad-hoc avahi-browse invocations and stalled the Raspberry Pi image flow when scaling control-plane nodes.",
  "resolution": "Expose the existing server-hosts query through a --print-server-hosts flag, reuse the mdns query helper, and cover the behaviour with pytest fixtures that simulate multiple server adverts.",
  "references": [
    "scripts/k3s-discover.sh",
    "tests/test_mdns_discovery_parsing.py"
  ]
}
