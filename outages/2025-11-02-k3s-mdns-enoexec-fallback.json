{
  "id": "k3s-mdns-enoexec-fallback",
  "date": "2025-11-02",
  "component": "k3s-discover",
  "rootCause": "tests/test_mdns_discovery_parsing.py drives k3s-discover via an avahi-browse stub that begins with indented shebang lines, triggering an ENOEXEC error. scripts/k3s_mdns_query.py surfaced no results instead of retrying, so the server-first query returned an empty host list.",
  "resolution": "Teach k3s_mdns_query._invoke_avahi to detect ENOEXEC and rerun the avahi-browse command through bash while keeping debug logging, ensuring stubbed scripts still feed records to the parser.",
  "references": [
    "scripts/k3s_mdns_query.py",
    "tests/test_mdns_discovery_parsing.py"
  ]
}
