{
  "id": "2025-09-01-raspbian-mirrors-timeouts",
  "date": "2025-09-01",
  "component": "pi-gen image build (apt mirrors)",
  "rootCause": "Multiple upstream raspbian mirrors intermittently unreachable during apt install in later stages (export-image). Hosts include raspbian.raspberrypi.com and mirrors.pidginhost.com, leading to consistent HTTP 80 timeouts despite retries.",
  "resolution": "Implemented persistent apt and dpkg Pre-Invoke hook to rewrite any raspbian mirror host to a stable HTTPS mirror (FCIX) before every apt action. Added stage0, stage2 and export-image mirror rewrites, and bypassed proxy for archive.raspberrypi.com. Ongoing: expand rewrite to cover late-stage sources regenerated by pi-gen tasks.",
  "references": [
    "scripts/build_pi_image.ps1",
    "pi-gen export-image logs showing repeated timeouts",
    "This outage record documents the repeated HTTP timeouts and the mitigation hooks"
  ]
}
