{
  "id": "2025-10-24-k3s-discover-mdns-server-self-check",
  "date": "2025-10-24",
  "component": "scripts/k3s-discover.sh",
  "rootCause": "Server self-check aborted because mdns parser skipped adverts when Avahi returned uppercase TXT keys, trailing spaces, and omitted the resolved host field.",
  "resolution": "Normalise TXT payloads (trim whitespace, lower-case phase/role), fall back to leader host when the resolved host is blank, lower-case local domains, and add regression tests covering the server advertisement path.",
  "references": [
    "Console: pi@sugarkube0 just up dev (2025-10-24)",
    "scripts/k3s_mdns_parser.py",
    "scripts/mdns_helpers.py",
    "tests/scripts/test_k3s_mdns_parser.py",
    "tests/scripts/test_mdns_helpers.py"
  ]
}
