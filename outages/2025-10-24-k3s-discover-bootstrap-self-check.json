{
  "id": "2025-10-24-k3s-discover-bootstrap-self-check",
  "date": "2025-10-24",
  "component": "scripts/k3s-discover.sh",
  "rootCause": "k3s-discover aborted bootstrap when avahi-browse could not observe the fresh bootstrap advertisement within the five default self-check attempts. On Raspberry Pi hardware avahi-publish-service sometimes needs more than five seconds to surface a new record, so the self-check timed out and just up dev aborted to avoid split brain.",
  "resolution": "Expand the bootstrap self-check window to 60 seconds, emit diagnostic logging when the browse fails, and add coverage that exercises delayed mDNS visibility so regressions are caught in CI.",
  "references": [
    "Console: pi@sugarkube0 just up dev (2025-10-24)",
    "scripts/k3s-discover.sh",
    "tests/scripts/test_k3s_discover_bootstrap_publish.py"
  ]
}
