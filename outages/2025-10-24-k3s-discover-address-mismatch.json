{
  "id": "k3s-discover-address-mismatch",
  "date": "2025-10-24",
  "component": "k3s-discover.sh",
  "rootCause": "Bootstrap self-check required the Avahi advertisement to report the exact IPv4 address. On Raspberry Pi dev clusters the helper announced the host but returned a different address during the first query, so discovery aborted to avoid a perceived split brain.",
  "resolution": "Allow the self-check to fall back to host matching when the expected address is missing while emitting a warning, gated by SUGARKUBE_MDNS_ALLOW_ADDR_MISMATCH.",
  "references": [
    "scripts/k3s-discover.sh",
    "tests/scripts/test_k3s_discover_bootstrap_publish.py"
  ]
}
