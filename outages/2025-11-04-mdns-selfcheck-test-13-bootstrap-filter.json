{
  "id": "2025-11-04-mdns-selfcheck-test-13-bootstrap-filter",
  "date": "2025-11-04",
  "component": "tests/bats/mdns_selfcheck.bats:585",
  "rootCause": "Test 'mdns self-check ignores bootstrap advertisement when server required' expects the script to report instance_not_found when it finds only a bootstrap role advertisement but EXPECTED_ROLE=server. Test uses avahi_browse_bootstrap_only.txt fixture. The script should filter out bootstrap advertisements when looking for a specific non-bootstrap role.",
  "resolution": "Investigation needed in role matching logic. The script should compare the discovered role (from TXT records) against EXPECTED_ROLE and skip/ignore instances that don't match. When no matching role is found, should exit with reason=instance_not_found. Check role parsing and filtering in mdns_selfcheck.sh main loop.",
  "references": [
    "tests/bats/mdns_selfcheck.bats:585-616",
    "tests/fixtures/avahi_browse_bootstrap_only.txt",
    "scripts/mdns_selfcheck.sh:530-700",
    "notes/final-summary.md:57-60"
  ]
}
