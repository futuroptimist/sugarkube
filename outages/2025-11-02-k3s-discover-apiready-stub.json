{
  "id": "k3s-discover-apiready-stub",
  "date": "2025-11-02",
  "component": "scripts.k3s-discover",
  "rootCause": "The test stub writer left a leading backslash and indentation before the shebang, causing the API readiness helper to run under /bin/sh where 'set -o pipefail' fails.",
  "resolution": "Normalized stub generation to strip dedent markers and common indentation before writing so the shebang is the first line and the helper executes with bash.",
  "references": [
    "tests/scripts/test_k3s_discover_mid_election_join.py",
    "scripts/k3s-discover.sh"
  ]
}
