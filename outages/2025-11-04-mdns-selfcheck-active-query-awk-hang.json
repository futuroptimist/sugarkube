{
  "id": "2025-11-04-mdns-selfcheck-active-query-awk-hang",
  "date": "2025-11-04",
  "component": "scripts/mdns_type_check.sh:173-184",
  "rootCause": "Active query awk processing could hang in certain test execution contexts when counting service instances. The awk command parsing avahi-browse output would not complete, preventing active_found from being set and causing premature exit with code 4.",
  "resolution": "Replaced awk with pure bash parsing using pattern matching and field iteration. The bash implementation is more robust in test environments where awk may interact unpredictably with command substitution and heredocs.",
  "references": [
    "tests/bats/mdns_selfcheck.bats:158-200",
    "scripts/mdns_type_check.sh:167-196"
  ]
}
