# Joining servers connect to the kube-vip virtual IP exposed by kube-vip.
# Copy to /etc/rancher/k3s/config.yaml on each additional control-plane node.
token: ${K3S_TOKEN}
server: https://10.30.30.30:6443
write-kubeconfig-mode: "0644"
tls-san:
  - api.sugarkube.prod.local
  - 10.30.30.30
node-taint:
  - "node-role.kubernetes.io/control-plane=true:NoSchedule"
disable:
  - servicelb
  - local-storage
node-label:
  - "node.kubernetes.io/role=control-plane"
  - "topology.kubernetes.io/zone=pi5-rack"
etcd-snapshot-schedule-cron: "0 */12 * * *"
etcd-snapshot-retention: 5
# Optional S3 settings are inherited from secrets if configured globally.
flannel-backend: vxlan
kube-controller-manager-arg:
  - "node-monitor-period=5s"
  - "node-monitor-grace-period=40s"
